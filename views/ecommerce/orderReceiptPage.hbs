<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Order Receipt</title>
    <link href="https://fonts.googleapis.com/css2?family=Didact+Gothic&display=swap" rel="stylesheet">     
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/essentials.css">
    <style type="text/css">

    .container {
        max-width: 598px;
        margin: auto;
        margin-top: 1rem;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.18);
        border-radius: 12px;
        padding-top: 1rem;
    }


    .receipt > * {
        padding-left: 3rem;
        padding-right: 3rem;
        margin-bottom: 2rem;
    }

    .receipt > div > p, 
    .receipt > .firstRow p {
        font-weight: 300;
        font-size: 18px;
        line-height: 1.5;
        margin-top: -10px;
    }

    .imgRow {
        display: flex;
        justify-content: space-around;
        align-items: center;
        margin-bottom: -6px;
    }

    .imgRow > img {
        height: 62px;
        margin-left: -23px;
        display: block;
        margin-bottom: 0rem;
    }

    .imgRow > button {
        margin-left: auto;
        width: auto;
        padding: 0px;
        padding: 2px 11px;
        border-radius: 5px;
        border: 1px solid #F2F2F2;
        text-decoration: none;
        background: #EB5757;
        color: white;
        font-weight: 300;
        font-size: 17px;
    }

    .firstRow {
        display: flex;
        margin-top: 10px;
        margin-bottom: -6px;
    }

    .firstRow > *:nth-child(2) {
        margin-left: auto;
        margin-right: 200px;
    }

    .orderSummary {
        margin-bottom: 1rem;
    }

    article {
        padding-bottom: 2rem;
        padding-top: 1rem;
    }

    article > p {
        padding: 3px 0;
        line-height: 1.5;
        font-size: 18px;
        display: flex;
        justify-content: space-between;
        color: #4F4F4F;
        font-weight: 300;
    }

    .receipt h3 {
        color: #333333;
    }

    article > p > span:nth-child(2) {
        font-family: 'Didact Gothic';
        color: black;
        font-weight: bold;
    }

    article > a {
        color: #333333;
        font-weight: bold;
    }
    
    </style>
</head>
<body>
    <nav>

        <div class="left">
            <a href="/{{data.brand}}/gen/page/landingPage/n">
                <img src="{{split0 data.resources.[0].logo}}" height="44">
            </a>
            <p>
            <span>Â·</span>
            <a href="/{{data.brand}}/gen/page/landingPage/n">Home</a>
            /
            <a href="/{{data.brand}}/gen/page/orderReceiptPage/n" class="active">Receipt</a>
            </p>
        </div>

        <div class="right">
            <a href="/{{data.brand}}/gen/page/findOrderPage/n">Find Order</a>
            <a href="/{{data.brand}}/gen/page/cartPage/n"><span>Cart</span><span class="cartBtn">{{data.countCart}}</span></a>
        </div>
    
    </nav>

    {{#unless data.cartItems}}
    <p class="error">No receipt found. Please dial 0331 7AM7AM7 for inquiry about your order. Keep your order Number and mobile Number in handy.</p>
    {{/unless}}

    {{#if data.cartItems}}
    <section class="container receipt">

        <div class="imgRow">
            <img src="{{split1 data.resources.[0].logo}}" alt="">
            <button class="copyText" onclick="copyText(this)">Copy Receipt Link</button>
        </div>

        <div class="firstRow ">
            
            <div class="">
                <h3>ORDER #</h3>
                <p id="orderNo">{{data.order.orderNo}}</p>
            </div>

            <div class="">
                <h3>STATUS</h3>
                <p>{{data.order.status}}</p>
            </div>
        
        </div>

        <div class="">
            <h3>NAME</h3>
            <p>{{data.order.name}}</p>
        </div>

        <div class="">
            <h3>SHIPPING ADDRESS</h3>
            <p>{{data.order.address}}</p>
        </div>

        <div class="">
            <h3>MOBILE NUMBER</h3>
            <p>{{data.order.mobile}}</p>
        </div>

        <h3 class="orderSummary">ORDER SUMMARY</h3>
    
        <article class="bg-grey" >

            {{#each data.cartItems}}
            <p class="itemRow items" cartId="{{this._id}}">
            <span>{{this.quantity}} x {{this.items.[0].name}} (Size {{this.items.[0].size}}) </span> 
            <span>{{this.quantity}} x PKR {{this.items.[0].cost}}</span>
            </p>
            {{/each}}

            <hr>
            
            <p class="itemRow">
                <span>Total Amount</span>
                <span>PKR {{data.totalCost}}</span>
            </p>

            <p>In'sha'Allah, you will receive this order in next 2 days. In case of a problem, please contact <br> 0331-7AM7AM7</p>
        
            <!-- TODO: <a href="/{{data.brand}}/gen/data/cancelOrder/n">Cancel Order</a> -->

        </article>
    </section>
    {{/if}}

    <input type="text" style="opacity: 0; pointer-events: none;" value="http://localhost:3000/7am/gen/page/orderReceiptPage/n?mobile={{data.order.mobile}}&orderNo={{data.order.orderNo}}" id="myInput">

    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script type="text/javascript">

    function numberWithSpaces() {
        let x = $('#orderNo').html();
        let result = x.replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        $('#orderNo').html(result);
    }
    
    function copyText(e) {
          /* Get the text field */
          var copyText = document.getElementById("myInput");

          /* Select the text field */
          copyText.select();
          copyText.setSelectionRange(0, 99999); /* For mobile devices */

          /* Copy the text inside the text field */
          document.execCommand("copy");

          /* Alert the copied text */
          $(e).html('Link Copied !');
          // alert("Copied the text: " + copyText.value);
    }
    
    $(document).ready(numberWithSpaces);

    </script>
</body>
</html>
