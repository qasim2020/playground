<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Order Receipt</title>
    <link href="https://fonts.googleapis.com/css2?family=Didact+Gothic&display=swap" rel="stylesheet">     
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/ecommerce/essentials.css">
    <style type="text/css">

    .container {
        max-width: 598px;
        margin: auto;
        margin-top: 1rem;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.18);
        border-radius: 12px;
        padding-top: 1rem;
    }


    .receipt > * {
        padding-left: 3rem;
        padding-right: 3rem;
        margin-bottom: 2rem;
    }

    .receipt > div > p, 
    .receipt > .firstRow p {
        font-weight: 300;
        font-size: 18px;
        line-height: 1.5;
        margin-top: -10px;
    }

    .imgRow {
        display: flex;
        justify-content: space-around;
        align-items: center;
        margin-bottom: -6px;
    }

    .imgRow > img {
        height: 62px;
        margin-left: -23px;
        display: block;
        margin-bottom: 0rem;
    }

    .imgRow > button {
        margin-left: auto;
        width: auto;
        padding: 0px;
        padding: 2px 11px;
        border-radius: 5px;
        border: 1px solid #F2F2F2;
        text-decoration: none;
        background: #EB5757;
        color: white;
        font-weight: 300;
        font-size: 17px;
    }

    .firstRow {
        display: flex;
        margin-top: 10px;
        margin-bottom: -6px;
    }

    .firstRow > *:nth-child(2) {
        margin-left: auto;
        margin-right: 200px;
    }

    .orderSummary {
        margin-bottom: 1rem;
    }

    article {
        padding-bottom: 2rem;
        padding-top: 1rem;
    }

    article > p {
        padding: 3px 0;
        line-height: 1.5;
        font-size: 18px;
        display: flex;
        justify-content: space-between;
        color: #4F4F4F;
        font-weight: 300;
    }

    .receipt h3 {
        color: #333333;
    }

    article > p > span:nth-child(2) {
        font-family: 'Didact Gothic';
        color: black;
        font-weight: bold;
    }

    article > a {
        color: #333333;
        font-weight: bold;
    }
    
    @media only screen and (max-width: 600px) {
        
        .container {
            margin-top: auto;
            padding-top: 0;
            margin: 13px;
        }

        .receipt > * {
            padding-left: 2rem;
            padding-right: 2rem;
        }

        .imgRow {
            padding-top: 1rem;
            flex-direction: column;
        }

        .imgRow > img {
            margin-left: 0;
            margin-bottom: 14px;
        }

        .imgRow > button {
            margin-left: 0;
            margin-right: auto;
        }

        .firstRow {
            margin-top: 18px;
        }

        .firstRow > *:nth-child(1) {
            width: 145px;
        }

        .firstRow > *:nth-child(2) {
            margin-right: 0px;
        }

        article > p{
            max-width: 100%;
       }

        article > p > span:nth-child(1) {
            max-width: 50%;
        }

        article > p > span:nth-child(2) {
            max-width: 40%;
            text-align: end;
        }
    }
    </style>
</head>
<body>
    <nav>

        <div class="left">
            <a href="/{{data.brand}}/gen/page/landingPage/n">
                <img src="{{split0 data.resources.[0].logo}}" height="44">
            </a>
            <p>
            <span>Â·</span>
            <a href="/{{data.brand}}/gen/page/landingPage/n">Home</a>
            /
            <a href="/{{data.brand}}/gen/page/orderReceiptPage/n" class="active">Receipt</a>
            </p>
        </div>

        <div class="right">
            <a href="/{{data.brand}}/gen/page/findOrderPage/n">Find Order</a>
            <a href="/{{data.brand}}/gen/page/cartPage/n"><span>Cart</span><span class="cartBtn">{{data.countCart}}</span></a>
        </div>
    
        <div class="mobile">
            <a href="/{{data.brand}}/gen/page/cartPage/n">
                <span>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7 18C5.9 18 5.01 18.9 5.01 20C5.01 21.1 5.9 22 7 22C8.1 22 9 21.1 9 20C9 18.9 8.1 18 7 18ZM1 2V4H3L6.6 11.59L5.25 14.04C5.09 14.32 5 14.65 5 15C5 16.1 5.9 17 7 17H19V15H7.42C7.28 15 7.17 14.89 7.17 14.75L7.2 14.63L8.1 13H15.55C16.3 13 16.96 12.59 17.3 11.97L20.88 5.48C20.96 5.34 21 5.17 21 5C21 4.45 20.55 4 20 4H5.21L4.27 2H1ZM17 18C15.9 18 15.01 18.9 15.01 20C15.01 21.1 15.9 22 17 22C18.1 22 19 21.1 19 20C19 18.9 18.1 18 17 18Z" fill="#828282"/>
                    </svg>
                </span>
                <span class="cartBtn">
                    {{data.countCart}}
                </span></a>
            <button onclick="toggleMenu(this)">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 18H21V16H3V18ZM3 13H21V11H3V13ZM3 6V8H21V6H3Z" fill="#828282"/>
                </svg>

                <svg class="d-none" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 18H16V16H3V18ZM3 13H13V11H3V13ZM3 6V8H16V6H3ZM21 15.59L17.42 12L21 8.41L19.59 7L14.59 12L19.59 17L21 15.59Z" fill="#828282"/>
                </svg>

            </button>

            {{> menuCard data=data}}

        </div>
    </nav>

    {{#unless data.cartItems}}
    <p class="error">No receipt found. Please dial 0331 7AM7AM7 for inquiry about your order. Keep your order Number and mobile Number in handy.</p>
    {{/unless}}

    {{#if data.cartItems}}
    <section class="container receipt">

        <div class="imgRow">
            <img src="{{split1 data.resources.[0].logo}}" alt="">
            <button class="copyText" onclick="copyText(this)">Copy Receipt Link</button>
        </div>

        <div class="firstRow ">
            
            <div class="">
                <h3>ORDER #</h3>
                <p id="orderNo">{{data.order.orderNo}}</p>
            </div>

            <div class="">
                <h3>STATUS</h3>
                <p>{{data.order.status}}</p>
            </div>
        
        </div>

        <div class="">
            <h3>NAME</h3>
            <p>{{data.order.name}}</p>
        </div>

        <div class="">
            <h3>SHIPPING ADDRESS</h3>
            <p>{{data.order.address}}</p>
        </div>

        <div class="">
            <h3>MOBILE NUMBER</h3>
            <p>{{data.order.mobile}}</p>
        </div>

        <h3 class="orderSummary">ORDER SUMMARY</h3>
    
        <article class="bg-grey" >

            {{#each data.cartItems}}
            <p class="itemRow items" cartId="{{this._id}}">
            <span>{{this.quantity}} x {{this.items.[0].name}} (Size {{this.items.[0].size}}) </span> 
            <span>{{this.quantity}} x PKR {{this.items.[0].cost}}</span>
            </p>
            {{/each}}

            <hr>
            
            <p class="itemRow">
                <span>Total Amount</span>
                <span>PKR {{data.totalCost}}</span>
            </p>

            <p>In'sha'Allah, you will receive this order in next 2 days. In case of a problem, please contact <br> 0331-7AM7AM7</p>
        
            <!-- TODO: <a href="/{{data.brand}}/gen/data/cancelOrder/n">Cancel Order</a> -->

        </article>
    </section>
    {{/if}}

    <input type="text" style="opacity: 0; pointer-events: none;" value="http://localhost:3000/7am/gen/page/orderReceiptPage/n?mobile={{data.order.mobile}}&orderNo={{data.order.orderNo}}" id="myInput">

    {{{data.resources.[0].scripts}}}
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="/ecommerce/essentials.js"></script>

    <script type="text/javascript">

    function numberWithSpaces() {
        let x = $('#orderNo').html();
        let result = x.replace(/\B(?=(\d{3})+(?!\d))/g, " ");
        $('#orderNo').html(result);
    }
    
    function copyText(e) {
          /* Get the text field */
          var copyText = document.getElementById("myInput");

          /* Select the text field */
          copyText.select();
          copyText.setSelectionRange(0, 99999); /* For mobile devices */

          /* Copy the text inside the text field */
          document.execCommand("copy");

          /* Alert the copied text */
          $(e).html('Link Copied !');
          // alert("Copied the text: " + copyText.value);
    }
    
    $(document).ready(numberWithSpaces);

    </script>
</body>
</html>
